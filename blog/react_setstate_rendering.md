2024/03/26
Next.js で作成している英単語暗記アプリの開発中に直面した state の仕様について書く。

https://qiita.com/makotohanada/items/923bbf9a9e51d6aa16b3 に書かれていた記事の「型」

「はじめに」
①この記事は何か
②対象は誰か
③ねらいは何か
結論
中身
「おわりに」

これに合わせて大まかな内容を考える。

「はじめに」
- Next.js を勉強がてら英単語暗記アプリを開発中
- 初歩的だが state でぬまったため、仕様を調べたのでそれを紹介
- 対象は React 初学者
- state の仕様について理解し、同じような沼り方を防げるようにしたい

「先に結論」
- こういうことをやろうとしたら1ずれた
- setState でカウントしていた数がずれるのは「state がスナップショットのように振る舞うから」

「中身」
- 間違っていたソースコードとその結果どうなっていたか紹介
- 間違っている理由を説明
  - 関数内では state は更新されないため、更新前のカウントを渡していた
- 正しいソースコードとその結果を紹介

「おわりに」
- 感想
  - 初歩的なことかと思うが、開発中に何度か同じことが発生したのでしっかり理解できてよかった
  - 当たり前だが仕様を理解したうえで実装することが大切だと思った